# Docker and Kubernetes for Java Developers

## Preface
Containers are enabling developers to package their applications (and underlying dependencies) in new ways that are portable and work consistently everywhere? On your machine, in production, in your data center, and in the cloud. And Docker has become the de facto standard for those portable containers in the cloud.

Docker is the developer-friendly Linux container technology that enables creation of your stack: OS, JVM, app server, app, and all your custom configuration. So with all it offers, how comfortable are you and your team taking Docker from development to production? Are you hearing developers say, “But it works on my machine!” when code breaks in production?

This lab offers developers an intro-level, hands-on session with Docker, from installation, to exploring Docker Hub, to crafting their own images, to adding Java apps and running custom containers. It will also explain how to use Swarm to orchesorchestrate these containers together. This is a BYOL (bring your own laptop) session, so bring your Windows, OSX, or Linux laptop and be ready to dig into a tool that promises to be at the forefront of our industry for some time to come.

## Requirements
This lab can be executed on a netbook with x86 architecture. For it to
be fun, you should have a decent hardware available. Beside the operating system of choice, there's only one other thing you should have installed already: A JDK.

### Hardware
. CPU
.. x86 (Intel Pentium)
.. x64 (i7 and comparable)
.. PowerPC G4
. Memory
.. 4 to 8 GB for attendees
.. 8 to 16 GB for instructors

#### Software

. Operating System
.. Windows 7 (SP1)
.. Mac OS X (10.6.8)
.. Fedora 21
. Java
.. Oracle JDK 8u45 or a comparable OpenJDK

## Setup Environments

This section describes the relevant steps for both attendees and instructors to setup the environments. Please follow the parts, that are appropriate for you.

### Attendees

This lab is designed for a BYOL (Brying Your Own Laptop) style hands-on-lab. We did our best to support a wide range of client configurations but only did test on machines as stated in the hardware section. Please make sure to double check your configuration.

link:https://github.com/arun-gupta/docker-java/tree/master/attendees[Go directly to the attendee Setup]


### Instructor

The instructor setup is designed to make the lab most reliable even with bad internet connections. Most if not all of the software can be directly downloaded from the instructor machine. The machine is setup as docker host and also runs a docker registry. Please make sure to execute these instructions way prior to the lab to provide a good experience to the attendees.

link:https://github.com/arun-gupta/docker-java/tree/master/instructor[Go directly to the Instructor Setup]

## The Lab

### Docker Basics
Docker simplifies software delivery by making it easy to build and share images that contain your application’s entire environment, or application operating system.

**What does it mean by application operating system ?**

Your application typically require a specific version of operating system, application server, JDK, database server, may require to tune the configuration files, and similarly multiple other dependencies. The application may need binding to specific ports and certain amount of memory. The components and configuration together required to run your application is what is referred to as application operating system.

You can certainly provide an installation script that will download and install these components. Docker simplifies this process by allowing to create an image that contains your application and infrastructure together, managed as one component. These images are then used to create Docker containers which run on the container virtualization platform, provided by Docker.

**How is it different from VM?**

Docker is an open source container virtualization platform.

Docker has three main components:

. __Images__ are *build component* of Docker and a read-only template of application operating system.
. __Containers__ are *run component* of Docker, and created from, images.Containers can be run, started, stopped, moved, and deleted.
. Images are stored, shared, and managed in a __registry__, the *distribution component* of Docker. The publically available registry is known as Docker Hub.

In order for these three components to work together, there is *Docker Daemon* that runs on a host machine and does the heavy lifting of building, running, and distributing Docker containers. In addition, there is *Client* that is a Docker binary which accepts commands from the user and communicates back and forth with the daemon.

.Docker architecture
image::images/docker-architecture.png[]

Client communicates with Daemon, either co-located on the same host, or on a different host. It requests the Daemon to pull an image from the repository using `pull` command. The Daemon then downloads the image from Docker Hub, or whatever registry is configured. Multiple images can be downloaded from the registry and installed on Daemon host. Images are run using `run` command to create containers on demand.



## Deploy Ticket Monster

https://github.com/rafabene/devops-demo

## Deploy an application from JBoss Developer Studio

http://blog.arungupta.me/deploy-wildfly-docker-eclipse/

## Cluster using Swarm

We don't setup Kubernetes on Windows yet (might be an option to use jube someday)

. https://github.com/rafabene/devops-demo
. Docker Swarm: http://blog.arungupta.me/clustering-docker-swarm-techtip85/

## Test Java EE Applications

http://blog.arungupta.me/run-javaee-tests-wildfly-docker-arquillian-cube/

## Container Linking by adding a separate DB
http://blog.arungupta.me/docker-mysql-persistence/
http://blog.arungupta.me/docker-container-linking-across-multiple-hosts-techtip69/

## Jenkins and staging through environments

??

## OpenShift v3 (Optional Part)

http://blog.arungupta.me/openshift-v3-getting-started-javaee7-wildfly-mysql/


## Docker Compose (Optional, No Windows Version without Python)

http://blog.arungupta.me/docker-compose-orchestrate-containers-techtip77/





## References

. JBoss and Docker: http://www.jboss.org/docker/
